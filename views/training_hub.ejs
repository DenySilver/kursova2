<%- include('partials/nav') %>

<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="mb-0">–í–∏–≤—á–µ–Ω–Ω—è: <%= lang.language_name %></h1>
        </div>
        <a href="/user/<%= userId %>/dashboard" class="btn btn-outline-secondary">‚¨Ö –ó–º—ñ–Ω–∏—Ç–∏ –º–æ–≤—É</a>
    </div>

    <!-- –í–µ—Ä—Ö–Ω—ñ –∫–∞—Ä—Ç–∫–∏ -->
    <div class="row g-3 mb-5">
        <div class="col-md-6">
            <div class="card bg-primary text-white shadow-sm h-100">
                <div class="card-body d-flex justify-content-between align-items-center p-4">
                    <div>
                        <h4 class="mb-1">üß† –Ü–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è</h4>
                        <% if (repetitionCount > 0) { %>
                            <span class="badge bg-light text-danger animate-pulse mb-2"><%= repetitionCount %> —Å–ª—ñ–≤ –Ω–∞ —Å—å–æ–≥–æ–¥–Ω—ñ</span>
                        <% } else { %>
                            <div class="small text-white-50">–í—Å—ñ —Å–ª–æ–≤–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω—ñ!</div>
                        <% } %>
                    </div>
                    <a href="/study/user/<%= userId %>/repetition/<%= lang.language_id %>" class="btn btn-light text-primary fw-bold px-4">–ü–æ—á–∞—Ç–∏</a>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card bg-warning text-dark shadow-sm h-100">
                <div class="card-body d-flex justify-content-between align-items-center p-4">
                    <div>
                        <h4 class="mb-1">üìù –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è</h4>
                    </div>
                    <a href="/study/user/<%= userId %>/test/<%= lang.language_id %>" class="btn btn-dark fw-bold px-4">–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç</a>
                </div>
            </div>
        </div>
    </div>

    <hr class="mb-4">

    <!-- –ö–∞—Ç–∞–ª–æ–≥ -->
    <h3 class="mb-4">üìÇ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Å–ª—ñ–≤</h3>
    <div class="row g-4">
        <% categories.forEach(cat => { 
            let colorClass = 'border-success'; 
            if (cat.difficulty_level === 'Medium') colorClass = 'border-warning';
            if (cat.difficulty_level === 'Hard') colorClass = 'border-danger';
        %>
            <div class="col-md-4">
                <a href="/study/user/<%= userId %>/cards/<%= lang.language_id %>/cat/<%= cat.category_id %>" class="text-decoration-none text-dark">
                    <div class="card h-100 shadow-sm hover-effect border-top border-4 <%= colorClass %>">
                        <div class="card-body p-4 text-center">
                            <h3 class="fw-bold mb-2"><%= cat.category_name %></h3>
                            <p class="text-muted"><%= cat.word_count %> —Å–ª—ñ–≤</p>
                            <span class="badge bg-light text-dark border"><%= cat.difficulty_level %></span>
                        </div>
                    </div>
                </a>
            </div>
        <% }) %>
    </div>
</div>